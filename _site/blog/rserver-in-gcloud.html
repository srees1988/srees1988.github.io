<!doctype html>

<html class="no-js" lang="en">

<head>


	<!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -

	Sree

	Journal Theme by https://jekyllthemes.io
	Premium + free Jekyll themes for your blog or website.

	- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->


	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

	<!-- Page Info -->
	<link rel="shortcut icon" href="/images/favicon.png">
	<title>R Studio Server on Google Cloud – Sree</title>
	<meta name="description" content="To configure R Studio Server - the gateway to build, transform and scale machine learning projects in cloud.">

	<!-- Twitter Card -->
	<meta name="twitter:card" content="summary_large_image">
	<meta name="twitter:title" content="R Studio Server on Google Cloud – Sree">
	<meta name="twitter:description" content="To configure R Studio Server - the gateway to build, transform and scale machine learning projects in cloud.">
	<meta name="twitter:image:src" content="http://localhost:4000/images/blogs/2.rserver_in_gcloud/rserver_1.jpg">

	<!-- Facebook OpenGraph -->
	<meta property="og:title" content="R Studio Server on Google Cloud – Sree" />
	<meta property="og:description" content="To configure R Studio Server - the gateway to build, transform and scale machine learning projects in cloud." />
	<meta property="og:image" content="http://localhost:4000/images/blogs/2.rserver_in_gcloud/rserver_1.jpg" />

	
	<!-- Font Embed Code -->
	<link href="https://fonts.googleapis.com/css?family=Merriweather:300,400|Muli:400,400i,600" rel="stylesheet">
	

	<!-- Styles -->
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" href="/css/style.css">
	
	<!-- Icons -->
	<script defer src="https://use.fontawesome.com/releases/v5.1.1/js/solid.js" integrity="sha384-GXi56ipjsBwAe6v5X4xSrVNXGOmpdJYZEEh/0/GqJ3JTHsfDsF8v0YQvZCJYAiGu" crossorigin="anonymous"></script>
	<script defer src="https://use.fontawesome.com/releases/v5.1.1/js/brands.js" integrity="sha384-0inRy4HkP0hJ038ZyfQ4vLl+F4POKbqnaUB6ewmU4dWP0ki8Q27A0VFiVRIpscvL" crossorigin="anonymous"></script>
	<script defer src="https://use.fontawesome.com/releases/v5.1.1/js/fontawesome.js" integrity="sha384-NY6PHjYLP2f+gL3uaVfqUZImmw71ArL9+Roi9o+I4+RBqArA2CfW1sJ1wkABFfPe" crossorigin="anonymous"></script>

	
	<!-- Custom Styles -->
	<style></style>
	

	
	<!-- Analytics Code -->
	
	

	
	<!-- Extra Header JS Code -->
	
	
	
</head>


<body class="loading ajax-loading" data-site-url="http://localhost:4000" data-page-url="/blog/rserver-in-gcloud">


	<header class="header">

	<div class="header-image header-image--on" style="background-image: url(/images/blogs/2.rserver_in_gcloud/rserver_1.jpg);"></div>
	<div class="header-image"></div>

	<div class="header-overlay"></div>

	<div class="header__content">

		
		<a href="/" class="header__title">
			Sree
		</a>
		

		<p class="header__tagline">Marketing Data Scientist</p>

		<div class="menu">
			<div class="menu__toggle js-menu-toggle">
				<div class="menu__toggle__icon"><span></span></div>
			</div>
			<div class="menu__wrap">
				<ul class="menu__list">
					
					<li class="menu__list__item">
						<a href="/" class="menu__list__item__link">Latest</a>
					</li>
					
					<li class="menu__list__item">
						<a href="/projects/" class="menu__list__item__link">Projects</a>
					</li>
					
					<li class="menu__list__item">
						<a href="/about" class="menu__list__item__link">About</a>
					</li>
					
					<li class="menu__list__item">
						<a href="/contact" class="menu__list__item__link">Contact</a>
					</li>
					
				</ul>
				<ul class="socials">
	
	
	
	
	<li class="socials__item">
		<a href="https://twitter.com/srees1988" target="_blank" class="socials__item__link" title="Twitter">
			<i class="fab fa-twitter" aria-hidden="true"></i>
		</a>
	</li>
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	<li class="socials__item">
		<a href="https://github.com/srees1988" target="_blank" class="socials__item__link" title="Github">
			<i class="fab fa-github" aria-hidden="true"></i>
		</a>
	</li>
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	<li class="socials__item">
		<a href="https://linkedin.com/in/srees1988/" target="_blank" class="socials__item__link" title="Linkedin">
			<i class="fab fa-linkedin" aria-hidden="true"></i>
		</a>
	</li>
	
	
</ul>
			</div>
		</div>

	</div>

</header>


	<div class="loader"><svg width="120" height="30" viewBox="0 0 120 30" xmlns="http://www.w3.org/2000/svg"><circle cx="15" cy="15" r="15"><animate attributeName="r" from="15" to="15" begin="0s" dur="0.8s" values="15;9;15" calcMode="linear" repeatCount="indefinite" /><animate attributeName="fill-opacity" from="1" to="1" begin="0s" dur="0.8s" values="1;.5;1" calcMode="linear" repeatCount="indefinite" /></circle><circle cx="60" cy="15" r="9" fill-opacity="0.3"><animate attributeName="r" from="9" to="9" begin="0s" dur="0.8s" values="9;15;9" calcMode="linear" repeatCount="indefinite" /><animate attributeName="fill-opacity" from="0.5" to="0.5" begin="0s" dur="0.8s" values=".5;1;.5" calcMode="linear" repeatCount="indefinite" /></circle><circle cx="105" cy="15" r="15"><animate attributeName="r" from="15" to="15" begin="0s" dur="0.8s" values="15;9;15" calcMode="linear" repeatCount="indefinite" /><animate attributeName="fill-opacity" from="1" to="1" begin="0s" dur="0.8s" values="1;.5;1" calcMode="linear" repeatCount="indefinite" /></circle></svg></div>

	<div class="page-loader"></div>

	
	<div class="page">

		<div class="page__content" data-page-title="R Studio Server on Google Cloud – Sree" data-image="/images/blogs/2.rserver_in_gcloud/rserver_1.jpg">

			<section class="intro">

	<div class="wrap">

		<h1>R Studio Server on Google Cloud</h1>
		<p>01 October 2019</p>

	</div>

</section>

<section class="single">

	<div class="wrap">

		<h3 id="objective">Objective</h3>

<p>To set up a fully operational machine learning Server on Google Cloud Compute Engine’s virtual machine instance.</p>

<h3 id="details">Details</h3>

<p>In a real-world scenario, cloud computing and machine learning goes hand-in-hand to build, transform and scale big-data analytics/ predictive modelling projects. Being a Linux server application, R Studio server is one of the best solutions that could be hosted on Google Cloud / Amazon Web Service / Azure to automatically process large volumes of data in SQL/ R/ Python in a centralized manner. Let’s have a look into the key steps to configure a fully functional R Studio Server on Google Cloud:</p>

<ol>
  <li>Configure a virtual machine instance (Ubuntu OS) on Google Cloud.</li>
  <li>Install R and R Studio Server on the Virtual Machine.</li>
  <li>Create users and groups.</li>
  <li>Schedule and run R scripts using cronR package.</li>
</ol>

<style>
body {
text-align: justify}
</style>

<h5 id="step-1-configure-a-virtual-machine-instance-ubuntu-os-on-google-cloud">Step 1. Configure a virtual machine instance (Ubuntu OS) on Google Cloud:</h5>

<p>Step 1.1. Create a Google Cloud Project:  Sign in to <a href="https://console.cloud.google.com">Google Cloud Console</a> and create a project.</p>

<p><img src="/images/blogs/2.rserver_in_gcloud/rserver_2.JPG" alt="" /></p>

<p>Step 1.2. Create a firewall rule: After creating the project,  we need to configure the firewall before launching the virtual machine instance on Google Cloud. Therefore, create a firewall rule in the Google Cloud Compute Engine by navigating to the ‘Firewall rules’ under ‘Menu’ &gt; ‘Networking’. Configure the following settings:</p>

<p><img src="/images/blogs/2.rserver_in_gcloud/rserver_3.png" alt="" /></p>

<p>Step 1.3. Create a Virtual Machine Instance: Set up a new virtual machine on Google Cloud by navigating to ‘VM Instances’ under ‘Menu’ &gt; ‘Compute Engine’.</p>

<p><img src="/images/blogs/2.rserver_in_gcloud/rserver_4.png" alt="" /></p>

<p>Step 1.4. Virtual Machine Configurations: Coin a name for the new VM instance (ex: “rstudio”) and choose a zone that’s close to the zone of operation to reduce the network latency. Since R stores all of its working datasets in memory, try to give the VM instance as much memory as we can afford.  Also, under “OS images”, choose one of the latest versions of Ubuntu that supports the OpenSSL 1.0.  R Studio Server connects always through an unsecured HTTP connection. Therefore, under Firewall, “Allow HTTP traffic”. Lastly, click “Create” to launch the instance.</p>

<p><img src="/images/blogs/2.rserver_in_gcloud/rserver_5.png" alt="" /></p>

<h5 id="step-2--install-r-and-r-studio-server-on-the-virtual-machine">Step 2.  Install R and R Studio Server on the Virtual Machine:</h5>

<p>Step 2.1.  SSH Connection: Click on “SSH” next to the new instance from Google Compute Engine’s VM instances window. This will launch the command prompt.</p>

<p><img src="/images/blogs/2.rserver_in_gcloud/rserver_6.png" alt="" /></p>

<p><img src="/images/blogs/2.rserver_in_gcloud/rserver_7.JPG" alt="" /></p>

<p>Step 2.2. Update apt: Update apt to make sure that we have the latest packages to use with Ubuntu.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sudo apt-get update
sudo apt-get upgrade
</code></pre></div></div>

<p>Step 2.3. Install R and R Studio Server:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sudo apt-get install r-base r-base-dev
</code></pre></div></div>
<p>Checkout the latest version of the 
<a href="https://rstudio.com/products/rstudio/download-server/debian-ubuntu/">RStudio Server</a> before running the following lines of code and install all the supporting packages:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sudo apt-get install gdebi-core
wget https://download2.rstudio.org/server/bionic/amd64/rstudio-server-1.2.5019-amd64.deb
sudo gdebi rstudio-server-1.2.5019-amd64.deb
sudo apt-get install libcurl4-openssl-dev libssl-dev libxml2-dev
</code></pre></div></div>

<h5 id="step-3-create-users-and-groups">Step 3. Create users and groups</h5>

<p>One of the biggest benefits of using R studio server is that it gives us a window to collaborate with peers from a centralized cloud framework. We could add users to our VM instance now so that others can work with our R Studio Server simultaneously.</p>

<p>Step 3.1. Create a group : Creating a group (ex: “marketing”) will make it easier to manage shared folders and files with the team.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sudo addgroup marketing
</code></pre></div></div>

<p>Step 3.2. Create a master user: The whole idea behind creating a master user is that while colleagues and peers will join or leave us, the “master user” would remain to own all shared files.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sudo adduser master
</code></pre></div></div>

<p><img src="/images/blogs/2.rserver_in_gcloud/rserver_8.JPG" alt="" /></p>

<p>Step 3.3. Create the shared folder:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cd /home/master
sudo mkdir shared_folder
sudo chown -R master:marketing shared_folder/
sudo chmod -R 770 shared_folder/
</code></pre></div></div>

<p>Step 3.4. Add users and link them to shared folder: Here I am adding Steve as an example to the recently created “marketing” group. Steve’s home folder has been linked to ‘master’ users shared folder.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sudo adduser steve
sudo gpasswd -a steve marketing
su - steve
ln -s /home/master/shared_folder /home/steve/shared_folder
exit
</code></pre></div></div>

<p><img src="/images/blogs/2.rserver_in_gcloud/rserver_9.JPG" alt="" /></p>

<p>That’s it! We are good to start using R Studio Server on Google Cloud. In order to open R studio Server on the browser, follow the URL syntax: <em>http://[External IP]:8787</em>. For example, if the External IP of the newly configured virtual machine instance is 35.185.161.49, then our R Studio Server URL would be: <em>http://35.199.10.210:8787/</em></p>

<p><img src="/images/blogs/2.rserver_in_gcloud/rserver_10.JPG" alt="" /></p>

<h5 id="step-4--schedule-and-run-r-scripts-using-cronr-package">Step 4.  Schedule and run R scripts using cronR package:</h5>

<p>Install cronR package to generate the task scheduler in R Studio Server. Use the add in to automate any scripts in the virtual machine instance.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>install.packages("cronR")
install.packages("shinyFiles")
</code></pre></div></div>
<p><img src="/images/blogs/2.rserver_in_gcloud/rserver_11.JPG" alt="" /></p>

<h5 id="step-5-whats-next">Step 5: What’s Next?</h5>

<p>We just finished setting up the machine learning framework in cloud. Here are some recommendations on what we could potentially do to scale up this data modeling and predictive analytics workflow:</p>

<p>1) Extract, transform and Load datasets from internal (CRM databases) or external data sources (Facebook / Google Ad sets) into cloud storage.</p>

<p>2) Build data models in SQL, R or Python (Use Reticulate and sqldf packages to source python/SQL scripts into R studio server).</p>

<p>3) Build supervised/ unsupervised/ reinforecement machine learning algorithms over the cloud sourced datamodel. Productionize the end-to-end process using cronR package.</p>

<p>4) Lastly, build a BI dashboard that visualizes the predictive model (could be anything from predicting the next month sales or churn rate to classifying the customer database using unsupervised cluster models).</p>

<p>Feel free to reach out to me if you need any help in understanding the aforedsaid configurations. Hope this helps:)</p>


	</div>

</section>

		</div>

	</div>


	<footer class="footer">

	<div class="footer__copyright">
	<font color="Grey">	<span>© 2019 Sree.</span></font>
		<style>.heart{color:#e25555;}</style>
                <font color="Grey">Hosted with</font> <span class="heart">❤</span> <font color="Grey">by</font> <span style="font-weight:bold"><font color="Grey">Github</font></span>
	
	</div>

</footer>



	<!-- Javascript Assets -->
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
	<script src="/js/journal-min.js"></script>

	
	<!-- Extra Footer JS Code -->
	
	


</body>

</html>